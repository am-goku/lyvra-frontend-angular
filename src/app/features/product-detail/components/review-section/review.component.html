<section class="max-w-5xl mx-auto mt-16 px-4">
    <h2 class="text-2xl font-bold mb-6">Customer Reviews</h2>

    <!-- Reviews List -->
    <div class="flex flex-col gap-6">
        @if(reviews.length > 0) {
        @for(review of reviews; track $index){
        <div class="border border-gray-200 rounded-xl p-5 shadow-sm">
            <div class="flex items-center justify-between mb-2">
                <div class="flex items-center gap-3">
                    <img src="https://picsum.photos/40/40?random={{review.id}}" alt="User avatar"
                        class="w-10 h-10 rounded-full" />
                    <div>
                        <p class="font-semibold text-gray-800">{{ review.user }}</p>
                        <p class="text-sm text-gray-500">{{ review.date }}</p>
                    </div>
                </div>

                <!-- Rating -->
                <div class="flex items-center ">
                    @for(star of [1,2,3,4,5]; track star){
                    <lucide-icon [img]="StarIcon" class="w-4 h-4 text-rose-600" [ngClass]="{'fill-current': true}" />
                    }
                </div>
            </div>

            <p class="text-gray-700">{{ review.comment }}</p>
        </div>
        }
        } @else {
        <p class="text-gray-500">No reviews yet. Be the first to review this product!</p>
        }
    </div>

    <!-- Divider -->
    <div class="border-t my-10"></div>

    <!-- Add Review Form -->
    <div class="bg-gray-50 border border-gray-200 rounded-2xl p-6">
        <h3 class="text-xl font-semibold mb-4">Add a Review</h3>

        <form (ngSubmit)="submitReview()" class="flex flex-col gap-4">
            <div>
                <label class="block text-sm mb-1">Your Name</label>
                <input type="text"
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-600"
                    [(ngModel)]="newReview.user" name="user" />
            </div>

            <div>
                <label class="block text-sm mb-1">Your Rating</label>
                <div class="flex gap-1">
                    @for (star of [1,2,3,4,5]; track $index) {
                    <lucide-icon [img]="StarIcon"
                        class="w-6 h-6 cursor-pointer text-rose-600 hover:fill-current transition"
                        [ngClass]="{'fill-current': star <= newReview.rating}" (click)="setRating(star)"></lucide-icon>
                    }
                </div>
            </div>

            <div>
                <label class="block text-sm mb-1">Your Review</label>
                <textarea rows="4"
                    class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-rose-600"
                    [(ngModel)]="newReview.comment" name="comment"></textarea>
            </div>

            <button type="submit"
                class="self-start bg-rose-600 hover:bg-rose-700 text-white px-6 py-2 rounded-full transition">
                Submit Review
            </button>
        </form>
    </div>
</section>