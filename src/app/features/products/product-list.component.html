<main class="py-16 relative lg:pt-20 h-full flex flex-col lg:flex-row max-w-7xl mx-auto gap-6 px-4">
  <products-filter />

  <!-- Loading State -->
  @if (loading()) {
  <section class="flex-1 flex flex-col overflow-auto">
    <!-- SKELETON PRODUCT GRID (Responsive) -->
    <section class="flex-1 px-4 mt-6">
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        @for (i of [1,2,3,4,5,6,7,8,9,10,11,12]; track i) {
        <div
          class="bg-white rounded-2xl shadow-md hover:shadow-xl transition-shadow overflow-hidden relative flex flex-col animate-pulse"
        >
          <!-- Favorite Button Placeholder -->
          <div class="absolute top-2 right-2 bg-black/40 p-1.5 rounded-full w-8 h-8"></div>

          <!-- Product Image Placeholder with Shimmer -->
          <div
            class="w-full aspect-square bg-gradient-to-br from-gray-100 via-gray-50 to-gray-100 relative overflow-hidden"
          >
            <div
              class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full animate-[shimmer_1.5s_infinite]"
            ></div>
          </div>

          <!-- Product Info -->
          <div class="p-4 flex flex-col flex-1 justify-between space-y-3">
            <!-- Name -->
            <div class="h-5 bg-gray-200 rounded-full w-11/12"></div>

            <!-- Price -->
            <div class="h-6 bg-indigo-100 rounded-full w-16"></div>

            <!-- Add to Cart Button -->
            <div
              class="w-full bg-indigo-200 hover:bg-indigo-300 h-10 rounded-full flex items-center justify-center gap-2"
            >
              <div class="w-4 h-4 bg-white/50 rounded-full"></div>
              <div class="h-3 bg-white/40 rounded w-20"></div>
            </div>
          </div>
        </div>
        }
      </div>

      <!-- Shimmer Animation -->
      <style>
        @keyframes shimmer {
          0% {
            transform: translateX(-100%);
          }

          100% {
            transform: translateX(100%);
          }
        }
      </style>
    </section>
  </section>
  }
  
  <!-- Error State -->
  @else if (error()) {
  <section class="flex-1 flex items-center justify-center p-8">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center">
      <!-- Error Icon -->
      <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <svg class="w-10 h-10 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
      </div>
      
      <!-- Error Title -->
      <h3 class="text-2xl font-bold text-gray-900 mb-3">Oops! Something went wrong</h3>
      
      <!-- Error Message -->
      <p class="text-gray-600 mb-6">{{ error() }}</p>
      
      <!-- Retry Button -->
      <button 
        (click)="retryLoading()"
        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-full transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg flex items-center justify-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        <span>Try Again</span>
      </button>
      
      <!-- Help Text -->
      <p class="text-sm text-gray-500 mt-4">
        If the problem persists, please contact our support team.
      </p>
    </div>
  </section>
  }
  
  <!-- Empty State (No Products) -->
  @else if (products().length === 0) {
  <section class="flex-1 flex items-center justify-center p-8">
    <div class="max-w-md w-full text-center">
      <!-- Empty Icon -->
      <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
        </svg>
      </div>
      
      <!-- Empty Title -->
      <h3 class="text-2xl font-bold text-gray-900 mb-3">No Products Available</h3>
      
      <!-- Empty Message -->
      <p class="text-gray-600 mb-6">
        We couldn't find any products at the moment. Check back soon for new arrivals!
      </p>
      
      <!-- Refresh Button -->
      <button 
        (click)="retryLoading()"
        class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-full transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md hover:shadow-lg inline-flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        <span>Refresh</span>
      </button>
    </div>
  </section>
  }
  
  <!-- Success State (Products Loaded) -->
  @else {
  <section class="flex-1 flex flex-col overflow-auto">
    <product-grid [products]="products()" />
    <product-pagination />
  </section>
  }

</main>
